<ui:composition template="/templates/pageTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:am="http://alertmonitor.io/facelets">

	<div id="contentFrame">
		<ui:define name="contentFrame">

			<p:outputLabel value="Data providers" style="font-weight: bold; font-size: 24px;"/>

			<h:form id="providersForm">

				<p:accordionPanel multiple="true"
								  widgetVar="multiple"
								  activeIndex="-1"
								  value="#{uiConfigBean.allDataProviders}" var="p">
					<p:tab>

						<f:facet name="title">
							<p:outputLabel value="#{p.providerConfig.name}" class="boldtext"  style="font-size: 20px;"/>
							<am:warnings value="#{p.warnings}" />
							<p:outputLabel value="Alarms: #{p.allActiveAlarmsCount}" style="margin-left: 20px; font-size: 12px;" />
						</f:facet>

						<p:panelGrid columns="2">

							<p:outputLabel value="Provider ID: " class="boldtext"/>
							<p:outputLabel value="#{p.providerConfig.id}" />

							<p:outputLabel value="Provider type: " class="boldtext"/>
							<p:outputLabel value="#{p.providerConfig.type}" />

							<p:outputLabel value="Provider URI: " class="boldtext"/>
							<p:outputLabel value="#{p.providerConfig.uri}" />

							<p:outputLabel value="Report: " class="boldtext"/>
							<p:link value="View report" outcome="/report/report">
								<f:param name="provider" value="#{p.providerConfig.id}" />
							</p:link>

							<p:outputLabel value="Last sync time: " class="boldtext"/>
							<p:outputLabel value="#{p.lastSyncTimestampFormatted}" />

						</p:panelGrid>

						<br/>

						<p:outputLabel value="Configuration parameters" class="boldtext"/>
						<p:dataTable value="#{p.providerConfig.params}" var="c"
									 cellpadding="0" cellspacing="0">
							<p:column headerText="Params">
								<p:outputLabel value="#{c}"/>
							</p:column>
						</p:dataTable>

					</p:tab>
				</p:accordionPanel>

			</h:form>

		</ui:define>
	</div>

</ui:composition>

